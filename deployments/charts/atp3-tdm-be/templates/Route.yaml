{{- if eq .Values.PAAS_PLATFORM "OPENSHIFT" }}
{{- if .Values.atp3tdm.externalLinkEnabled }}
---
kind: Route
apiVersion: route.openshift.io/v1
metadata:
  name: '{{ .Values.LABEL }}{{ .Values.SERVICE_NAME }}'
  annotations:
    haproxy.router.openshift.io/timeout: 10h
spec:
  host: '{{ include "atp3tdm.ingressHost" . }}'
  port:
    targetPort: web
  tls:
    insecureEdgeTerminationPolicy: '{{ .Values.atp3tdm.terminationPolicy }}'
    termination: Edge
  to:
    kind: Service
    name: '{{ .Values.LABEL }}{{ .Values.SERVICE_NAME }}'
    weight: 100
status:
  ingress:
    - conditions:
      host: '{{ include "atp3tdm.ingressHost" . }}'
{{- end }}
{{- end }}
